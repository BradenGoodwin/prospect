
<!-- Ractive Template for jQueryUI Dialog Component -->
<script id="dialog-r-template" type='text/ractive'>
	<div class="jq-dialog-template" title="{{title}}">
		{{yield}}
	</div>
</script>


<!-- Outer-most (application) layer of output for Ractive to generate -->
<script id="ractive-base" type='text/ractive'>
	<div id="insert-dialog"></div>
	{{#if errorMsg.length > 0}}
	<div id="error-frame">{{errorMsg}}</div>
	{{/if}}
	<button id="prsp-save-data" on-click="saveRecord">Verify and Save Record</button><br/>
	<div>
		<label for="rec-id">Unique Record ID </label> <input type="text" id="rec-id" size="32" value="{{recID}}" pattern="[\w\-]+" required/>
		<button decorator="iconButton:ui-icon-info" on-click="idHint">Hint for IDs</button>
		<label for="rec-type">Template Type </label>
		<select id="rec-type" value="{{recType}}">
		{{#each defTemplates}}
			<option value="{{this.id}}">{{this.def.l}} ({{this.id}})</option>
		{{/each}}
		</select>
	</div>
	<div>
		{{#each defRecord:rIndex}}
			<b>{{def.l}}</b>
			{{#if def.t == 'V'}}
				{{>att-type-Vocabulary}}
			{{elseif def.t == 'T'}}
				{{>att-type-Text}}
			{{elseif def.t == 'g'}}
				{{>att-type-Tags}}
			{{elseif def.t == 'N'}}
				{{>att-type-Number}}
			{{elseif def.t == 'D'}}
				{{>att-type-Dates}}
			{{elseif def.t == 'L'}}
				{{>att-type-Lat-Lon}}
			{{elseif def.t == 'X'}}
				{{>att-type-X-Y}}
			{{elseif def.t == 'I'}}
				{{>att-type-Image}}
			{{elseif def.t == 'l'}}
				{{>att-type-Link-To}}
			{{elseif def.t == 'S'}}
				{{>att-type-SoundCloud}}
			{{elseif def.t == 'Y'}}
				{{>att-type-YouTube}}
			{{elseif def.t == 'x'}}
				{{>att-type-Transcript}}
			{{elseif def.t == 't'}}
				{{>att-type-Timecode}}
			{{elseif def.t == 'P'}}
				{{>att-type-Pointer}}
			{{elseif def.t == 'J'}}
				{{>att-type-Join}}
			{{/if}}
			{{#if def.h.length > 0}}
				<button decorator="iconButton:ui-icon-info" on-click="giveHint:{{rIndex}}">Hint</button>
			{{/if}}
			<br/>
		{{/each}}
	</div>
</script>

<!-- PARTIALS -->
<script id="att-type-Vocabulary" type='text/ractive'>
	<input type="text" size="32" value="{{value}}"/>
	{{#if def.d.length > 0}}<button on-click="clearVocab:{{rIndex}}">Clear</button>{{/if}}
	<select value="{{lgndSel}}">
	{{#each def.newLgnd}}
		<option value="{{this.newV}}">{{this.newL}}</option>
	{{/each}}
	</select>
	<button on-click="addVocab:{{rIndex}}">
	{{#if def.d.length > 0}}
	Add
	{{else}}
	Set
	{{/if}}
	</button>
</script>

<script id="att-type-Text" type='text/ractive'>
	<input type="text" size="48" value="{{value}}"/>
</script>

<script id="att-type-Tags" type='text/ractive'>
	<input type="text" size="32" value="{{value}}"/> (delimiter "{{def.d}}")
</script>

<script id="att-type-Number" type='text/ractive'>
	<input type="text" size="10" value="{{value}}"/> (Min {{def.r.min}}, Max {{def.r.max}})
</script>

<script id="att-type-Dates" type='text/ractive'>
	From <input type="text" size="6" value="{{value.min.y}}" placeholder="YYYY" pattern="(^$|\?|~?-?\d+)"/>
		<input type="text" size="2" value="{{value.min.m}}" placeholder="MM" pattern="\d{0,2}"/>
		<input type="text" size="2" value="{{value.min.d}}" placeholder="DD" pattern="\d{0,2}"/>
	To <input type="text" size="6" value="{{value.max.y}}" placeholder="YYYY" pattern="(^$|open|~?-?\d+)"/>
		<input type="text" size="2" value="{{value.max.m}}" placeholder="MM" pattern="\d{0,2}"/>
		<input type="text" size="2" value="{{value.max.d}}" placeholder="DD" pattern="\d{0,2}"/>
</script>

<script id="att-type-Lat-Lon" type='text/ractive'>
	Lat,Long: <input type="text" size="20" value="{{value}}"/>
	{{#if canGeoLoc}}<button on-click="setHere:{{rIndex}}">Here</button>{{/if}}
</script>

<script id="att-type-X-Y" type='text/ractive'>
	X,Y: <input type="text" size="8" value="{{value}}" pattern="^$|^-?\d{1,4},\s?-?\d{1,4}"/>
</script>

<script id="att-type-Image" type='text/ractive'>
	URL for image: <input type="url" value="{{value}}" pattern="^$|^https?://.+(\.jpg|\.JPG|\.jpeg|\.JPEG|\.png|\.PNG|\.gif|\.GIF)$"/>
</script>

<script id="att-type-Link-To" type='text/ractive'>
	URL to webpage: <input type="url" size="20" value="{{value}}" pattern="^$|^https?://.+$"/>
</script>

<script id="att-type-SoundCloud" type='text/ractive'>
	URL to SoundCloud: <input type="url" size="20" value="{{value}}" pattern="^$|^https?://soundcloud.com/.+"/>
</script>

<script id="att-type-YouTube" type='text/ractive'>
	YouTube ID code: <input type="text" size="10" value="{{value}}"/>
</script>

<script id="att-type-Transcript" type='text/ractive'>
	URL to Transcript text file: <input type="url" size="20" value="{{value}}" pattern="^$|^https?://.+\.txt$"/>
</script>

<script id="att-type-Timecode" type='text/ractive'>
	Timestamped extract: <input type="text" size="23" value="{{value}}" placeholder="HH:MM:SS.ms-HH:MM:SS.ms" pattern="^$|\d\d:\d\d:\d\d\.\d{1,2}(-\d\d:\d\d:\d\d\.\d{1,2})*"/>
</script>

<script id="att-type-Pointer" type='text/ractive'>
	(Record ID or IDs): <input type="text" size="32" value="{{value}}"/>
	{{#if def.d.length > 0}}<button on-click="clearPtr:{{rIndex}}">Clear</button>{{/if}}
	<button on-click="addPointerID:{{rIndex}}">
		{{#if def.d.length > 0}}Add ID
		{{else}}Set ID
		{{/if}}
	</button>
</script>

<script id="att-type-Join" type='text/ractive'>
	ID of Record to Join: <input type="text" size="32" value="{{value}}" pattern="^$|[\w\-]+"/>
	<button on-click="getJoinIDs:{{rIndex}}">Select ID</button>
</script>


<!-- DIALOGS -->
<!-- Choose Template Dialog -->
<script id="dialog-choose-list" type='text/ractive'>
	<dialog title="Choose ID" width="300" height="350">
		{{#if loading}}<p style="color: red">Please wait while remote data is loaded</p>{{/if}}
		{{#if !loading && list.length==0}}<p style="color: red">No data available -- select "Cancel"</p>{{/if}}
		<div class="scroll-container">
			{{#each list:index}}
				{{#if selIndex == index}}
					<span style="color: red" on-click="doSelect:{{index}}"><b>{{.}}</b></span>
				{{else}}
					<span on-click="doSelect:{{index}}"><b>{{.}}</b></span>
				{{/if}}
				<br/>
			{{/each}}
		</div>
	</dialog>
</script>

<!-- Confirm Dialog -->
<script id="dialog-confirm" type='text/ractive'>
	<dialog title="Confirm" width="300" height="265">
		<div class="scroll-container">
			{{message}}
		</div>
	</dialog>
</script>

<!-- Hint Dialog -->
<script id="dialog-message" type='text/ractive'>
	<dialog title="Display Hint" width="300" height="350" cancel="false">
		<div class="scroll-container">
			{{message}}
		</div>
	</dialog>
</script>

<!-- ERRORS -->
<script id="errmsg-id" type='text/ractive'>
You must supply an internal ID for the Record that is no more than 32 characters in length and consists entirely of alphanumeric characters (in plain ASCII), spaces and underscores (it cannot contain spaces, punctuation, Unicode-only characters, etc).
</script>

<script id="errmsg-no-templates" type='text/ractive'>
<p><b>You cannot create any Records until you have defined Templates.</b></p>
</script>

<script id="errmsg-number" type='text/ractive'>
You have entered a value into a number field that is not formatted properly.
</script>

<script id="errmsg-number-range" type='text/ractive'>
A number you entered is below the minimum allowable value or above the allowable maximum.
</script>

<script id="errmsg-date-range" type='text/ractive'>
A Date you entered is not a valid, or is before the minimum allowable year or past the maximum allowable year.
</script>

<script id="errmsg-date-maxmin" type='text/ractive'>
The start year is greater than the end year for a Date you have entered.
</script>


<!-- MESSAGE -->
<script id="msg-confirm-del-vf" type='text/ractive'>
Are you sure that you wish to delete this View/Filter from your Exhibit?
</script>
